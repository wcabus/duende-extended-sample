"use strict";(self.webpackChunkidentity_express_manager_ui=self.webpackChunkidentity_express_manager_ui||[]).push([[183],{1183:(L,u,n)=>{n.r(u),n.d(u,{ViewIdentityResourcesModule:()=>E});var m=n(9808),f=n(3673),g=n(3234),p=n(4894),T=n(1041),I=n(5558),C=n(9835),S=n(1541),D=n(8226),Z=n(6757),O=n(5550),V=n(4989),d=n(1556),Q=n(4195),R=n(5654),e=n(5e3),c=n(2313),y=n(8396),w=n(4988),h=n(1101),v=n(9468);function A(s,o){if(1&s&&(e.TgZ(0,"app-form-row",2),e._UZ(1,"app-readonly",3),e.qZA()),2&s){const t=e.oxw();e.Q6J("label","Resources.AssignedClaims"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Multi)("values",t.displayClaims)}}let J=(()=>{class s{constructor(t,i,r,a){this.titleService=t,this.identityResourceService=i,this.claimTypesService=r,this.translate=a,this.displayClaims=[]}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().subscribe(t=>{this.identityResource=t,this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.identityResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${d.de.SITE_TITLE}`),this.claimTypesService.getClaimTypes().subscribe(i=>{if(this.identityResource.allowedClaims.length>0){const r=this.findAssignedClaims(i);this.displayClaims=r.map(a=>new Q.I(a.name))}})})}ngOnDestroy(){var t;null===(t=this.identityResourceSubscription)||void 0===t||t.unsubscribe()}findAssignedClaims(t){const i=[];return this.identityResource.allowedClaims.forEach(r=>{t.forEach((a,K)=>{a.name===r&&(t.splice(K,1),i.push(a))})}),i}get ReadOnlyFieldType(){return R.O}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(c.Dx),e.Y36(y.Q),e.Y36(w.M),e.Y36(p.sK))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-identity-resource-claims"]],decls:5,vars:4,consts:[[1,"cms"],[3,"label",4,"ngIf"],[3,"label"],[3,"fieldType","values"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA(),e.YNc(4,A,2,3,"app-form-row",1)),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"IdentityResources.UserClaimTypes")),e.xp6(2),e.Q6J("ngIf",i.displayClaims))},directives:[m.O5,h.L,v.f],pipes:[p.X$],encapsulation:2}),s})();var x=n(5698),F=n(2290),b=n(3479);let N=(()=>{class s{constructor(t,i,r,a){this.titleService=t,this.identityResourceService=i,this.toastr=r,this.translate=a,this.properties=[]}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().subscribe(t=>{this.identityResource=t,this.properties=this.identityResource.properties||[],this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.identityResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${d.de.SITE_TITLE}`)})}ngOnDestroy(){var t;null===(t=this.identityResourceSubscription)||void 0===t||t.unsubscribe()}onPropertiesChanged(t){this.properties=t;const i=Object.assign(this.identityResource,{properties:this.properties});this.identityResourceService.updateResource(i).pipe((0,x.q)(1)).subscribe(r=>{this.identityResource=i,this.identityResourceService.getCachedIdentityResource().next(i),this.toastr.success(this.translate.instant("IdentityResources.UpdatedResource"),this.translate.instant("Notifications.Success"))})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(c.Dx),e.Y36(y.Q),e.Y36(F._W),e.Y36(p.sK))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-identity-resource-properties"]],decls:1,vars:3,consts:[[3,"modalId","isReadOnly","properties","propertiesChanged"]],template:function(t,i){1&t&&(e.TgZ(0,"app-properties-editor",0),e.NdJ("propertiesChanged",function(a){return i.onPropertiesChanged(a)}),e.qZA()),2&t&&e.Q6J("modalId",i.identityResource.id)("isReadOnly",!0)("properties",i.properties)},directives:[b.s],encapsulation:2}),s})();var Y=n(2140);const l=function(s){return[s]},U=[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:(()=>{class s{constructor(t,i,r){this.titleService=t,this.identityResourceService=i,this.translate=r}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().subscribe(t=>{this.identityResourceDictionary=new Y.$(t),this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+t.displayName+" "+this.translate.instant("Nav.Details")+` - ${d.de.SITE_TITLE}`)})}ngOnDestroy(){this.identityResourceSubscription.unsubscribe()}get ReadOnlyFieldType(){return R.O}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(c.Dx),e.Y36(y.Q),e.Y36(p.sK))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-view-identityresource-details"]],decls:14,vars:37,consts:[["id","identityResourceDetails"],[3,"label","help"],[3,"fieldType","values"],[3,"label","help","isLast"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form"),e.TgZ(2,"app-form-row",1),e._UZ(3,"app-readonly",2),e.qZA(),e.TgZ(4,"app-form-row",1),e._UZ(5,"app-readonly",2),e.qZA(),e.TgZ(6,"app-form-row",1),e._UZ(7,"app-readonly",2),e.qZA(),e.TgZ(8,"app-form-row",1),e._UZ(9,"app-readonly",2),e.qZA(),e.TgZ(10,"app-form-row",1),e._UZ(11,"app-readonly",2),e.qZA(),e.TgZ(12,"app-form-row",3),e._UZ(13,"app-readonly",2),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("label","Resources.ResourceID")("help","IdentityResources.IDHelp"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(25,l,i.identityResourceDictionary.name)),e.xp6(1),e.Q6J("label","Common.DisplayName")("help","IdentityResources.DisplayNameHelp"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(27,l,i.identityResourceDictionary.displayName)),e.xp6(1),e.Q6J("label","Common.Description")("help","Resources.DescriptionHelp"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(29,l,i.identityResourceDictionary.description)),e.xp6(1),e.Q6J("label","Resources.Required")("help","IdentityResources.ConsentResource"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(31,l,i.identityResourceDictionary.required)),e.xp6(1),e.Q6J("label","IdentityResources.ShowInDiscoveryDocumentReadOnly")("help","IdentityResources.DiscoveryDocumentDescription"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(33,l,i.identityResourceDictionary.showInDiscoveryDocument)),e.xp6(1),e.Q6J("label","Common.EmphasizeReadOnly")("help","IdentityResources.ConsentScreen")("isLast",!0),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(35,l,i.identityResourceDictionary.emphasize)))},directives:[h.L,v.f],encapsulation:2}),s})()},{path:"claims",component:J},{path:"properties",component:N}];let E=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[m.ez,p.aw.forChild({extend:!0}),f.Bz.forChild(U),T.D,V.y,S.U,g.fQ,C.I,I.j,O.s,D.l,Z.G]]}),s})()}}]);